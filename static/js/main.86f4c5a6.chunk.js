(this["webpackJsonpreact-form"]=this["webpackJsonpreact-form"]||[]).push([[0],{114:function(e,t,a){},238:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(11),r=a.n(i),c=a(24),l=a(12),o=(a(114),a(9)),d=a(101),j=a.n(d),u=a(33),b=a(55),m=a(25),h=a(272),p=a(268),O=a(2),v=m.a().shape({email:m.b().required().email().max(255),password:m.b().required().min(8)}),x=Object(p.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}})),g=function(e){var t,a,s=e.email,n=e.setEmail,i=e.password,r=e.setPassword,c=e.setApiToken,l=e.instance,d=e.setUserImage,j=e.checkLoginStatus,m=e.setCheckLoginStatus,p=x(),g=Object(o.f)(),f=Object(u.b)({mode:"onBlur",resolver:Object(b.yupResolver)(v)}),w=f.register,k=f.handleSubmit,N=f.errors;return Object(O.jsx)("div",{children:Object(O.jsxs)("form",{onSubmit:k((function(e){m(!j),j?g.push("/login"):(g.push("/answers"),l.post("/auth/login",{email:s,password:i}).then((function(e){console.log("\u042f \u043f\u043e\u043b\u0443\u0447\u0438\u043b:",e.data),d(e.data.user.avatar),c(e.data.token.access_token)})).catch((function(e){console.log(e.response.data)})))})),className:p.root,children:[Object(O.jsx)("div",{className:"btn-title",children:Object(O.jsx)("h3",{children:j?"Sing out":"Login"})}),Object(O.jsx)("p",{children:null===(t=N.email)||void 0===t?void 0:t.message}),Object(O.jsx)(h.a,{inputRef:w,id:"outlined-email-input",label:"Email",variant:"outlined",placeholder:"Enter your email.",name:"email",type:"email",autoComplete:"email",value:s,onChange:function(e){return n(e.target.value)}}),Object(O.jsx)("p",{children:null===(a=N.password)||void 0===a?void 0:a.message}),Object(O.jsx)(h.a,{inputRef:w,id:"outlined-password-input",label:"Password",type:"password",autoComplete:"current-password",variant:"outlined",name:"password",value:i,onChange:function(e){return r(e.target.value)}}),Object(O.jsx)("div",{className:"btn-wrapper",children:Object(O.jsx)("button",{type:"submit",children:j?"Sing out":"Login"})})]})})},f=m.a().shape({name:m.b().max(255).required(),email:m.b().required().email(),password:m.b().required().min(8).max(255)}),w=function(e){var t,a,s,n=e.email,i=e.setEmail,r=e.password,c=e.setPassword,l=(e.setApiToken,e.instance),d=e.username,j=e.setUsername,m=e.avatarFile,p=(e.setAvatarFile,Object(o.f)()),v=Object(u.b)({mode:"onBlur",resolver:Object(b.yupResolver)(f)}),x=v.register,g=v.handleSubmit,w=v.errors;return Object(O.jsx)("div",{children:Object(O.jsxs)("form",{onSubmit:g((function(e){var t=new FormData;m&&t.append("avatar",m,m.name),t.append("email",n),t.append("name",d),t.append("password",r),t.append("password_confirmation",r),console.log(e),l.post("/auth/register",t,{headers:{"Content-type":"multipart/form-data"}}).then((function(e){console.log("\u042f \u043f\u043e\u043b\u0443\u0447\u0438\u043b:",e.data)})).catch((function(e){console.log(e.response.data)})),p.push("/login")})),method:"post",children:[Object(O.jsx)("div",{className:"btn-title",children:Object(O.jsx)("h3",{children:"Registration"})}),Object(O.jsx)("p",{children:null===(t=w.email)||void 0===t?void 0:t.message}),Object(O.jsx)(h.a,{inputRef:x,id:"outlined-email-input",label:"Email",variant:"outlined",placeholder:"Enter your email.",name:"email",type:"email",autoComplete:"email",value:n,onChange:function(e){return i(e.target.value)}}),Object(O.jsx)("p",{children:null===(a=w.name)||void 0===a?void 0:a.message}),Object(O.jsx)(h.a,{inputRef:x,id:"outlined-password-input",label:"Name",type:"text",variant:"outlined",name:"name",value:d,onChange:function(e){return j(e.target.value)}}),Object(O.jsx)("p",{children:null===(s=w.password)||void 0===s?void 0:s.message}),Object(O.jsx)(h.a,{inputRef:x,id:"outlined-password-input",label:"Password",type:"password",autoComplete:"current-password",variant:"outlined",name:"password",value:r,onChange:function(e){return c(e.target.value)}}),Object(O.jsx)("input",{type:"file",name:"avatar",multiple:!0,accept:".bmp, .jpeg, .png",label:"Avatar",ref:x}),Object(O.jsx)("div",{className:"btn-wrapper",children:Object(O.jsx)("button",{type:"submit",children:"Submit"})})]})})},k=a(273),N=Object(p.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}}}})),S=function(e){var t=e.answers,a=e.instance,s=e.getApiToken,n=e.setAnswers,i=e.userImage,r=e.username,c=N();return Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{className:"answers-h",children:"Answers"}),Object(O.jsxs)("div",{className:"answers-block",children:[Object(O.jsxs)("div",{className:"answers-block-info",children:[Object(O.jsx)("div",{className:c.root,children:Object(O.jsx)(k.a,{src:i,alt:"user"})}),Object(O.jsx)("p",{children:r})]}),Object(O.jsxs)("div",{className:"columm",children:[Object(O.jsx)("div",{className:"wrapper-answers",children:t}),Object(O.jsx)("div",{className:"btn-wrapper",children:Object(O.jsx)("button",{onClick:function(){console.log("useravatrt ".concat(i)),a.get("/posts/1/answers",{headers:{Authorization:"Bearer "+s()}}).then((function(e){n(e.data.data.map((function(e){return Object(O.jsxs)("div",{className:"answer",children:[Object(O.jsx)("div",{className:"user",children:Object(O.jsx)("p",{children:e.user.name})}),Object(O.jsxs)("div",{className:"message",children:[Object(O.jsx)("h4",{children:e.title}),Object(O.jsx)("p",{children:e.message})]})]},e.id)})))})).catch((function(e){console.log(e.response.data)}))},type:"submit",children:"List Answers"})})]})]})]})},C=function(e){var t=e.checkLoginStatus;return Object(O.jsxs)("nav",{children:[Object(O.jsxs)("div",{className:"person-info",children:[Object(O.jsx)("h2",{children:"Zakharov Aleksandr"}),Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)("a",{href:"tel:+375256265876",children:"+375(25)6265876"})}),Object(O.jsx)("li",{children:Object(O.jsx)("a",{href:"mailto:Zakharov.faur@gmail.com",children:"Zakharov.faur@gmail.com"})}),Object(O.jsx)("li",{children:Object(O.jsx)("a",{href:"https://github.com/ZakharovOwl",children:"GitHub: ZakharovOwl"})}),Object(O.jsx)("li",{children:Object(O.jsx)("a",{href:"https://zakharovowl.github.io/Portfolio/",children:"My Portfolio"})}),Object(O.jsx)("li",{children:Object(O.jsx)("a",{href:"https://t.me/zakharov_faur",children:"Telegram"})})]})]}),Object(O.jsxs)("ul",{className:"navigation",children:[Object(O.jsx)("li",{children:Object(O.jsx)(c.b,{to:"/",exact:!0,activeClassName:"link_active",className:"list__link",children:"Registration"})}),Object(O.jsx)("li",{children:Object(O.jsx)(c.b,{to:"/login",exact:!0,activeClassName:"link_active",className:"list__link",children:t?"Sing out":"Login"})}),Object(O.jsx)("li",{className:t?"":"answers-link-active",children:Object(O.jsx)(c.b,{to:"/answers",exact:!0,activeClassName:"link_active",className:"list__link",children:"Answers"})})]})]})};var y=function(){var e="token",t=Object(s.useState)(""),a=Object(l.a)(t,2),n=a[0],i=a[1],r=Object(s.useState)(""),c=Object(l.a)(r,2),d=c[0],u=c[1],b=Object(s.useState)(""),m=Object(l.a)(b,2),h=m[0],p=m[1],v=Object(s.useState)(void 0),x=Object(l.a)(v,2),f=x[0],k=x[1],N=Object(s.useState)(void 0),y=Object(l.a)(N,2),A=y[0],L=y[1],_=Object(s.useState)(void 0),E=Object(l.a)(_,2),F=E[0],P=E[1],R=Object(s.useState)(!1),T=Object(l.a)(R,2),I=T[0],q=T[1],B=j.a.create({baseURL:"https://guest-book.naveksoft.com/api/v1"}),U=function(t){localStorage.setItem(e,t),console.log("token is working")};return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(C,{checkLoginStatus:I}),Object(O.jsx)("div",{className:"wrapper",children:Object(O.jsxs)(o.c,{children:[Object(O.jsx)(o.a,{exact:!0,path:"/",children:Object(O.jsx)(w,{email:n,setEmail:i,password:h,setPassword:p,instance:B,setApiToken:U,username:d,setUsername:u,avatarFile:A,setAvatarFile:L})}),Object(O.jsx)(o.a,{path:"/login",children:Object(O.jsx)(g,{email:n,setEmail:i,password:h,setPassword:p,instance:B,setApiToken:U,setUserImage:P,checkLoginStatus:I,setCheckLoginStatus:q})}),Object(O.jsx)(o.a,{path:"/answers",children:Object(O.jsx)(S,{instance:B,getApiToken:function(){if(!localStorage.getItem(e))throw new Error("No token");return console.log("use token"),localStorage.getItem(e)},setAnswers:k,userImage:F,answers:f,username:d})})]})})]})},A=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,275)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),i(e),r(e)}))};r.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(c.a,{children:Object(O.jsx)(y,{})})}),document.getElementById("root")),A()}},[[238,1,2]]]);
//# sourceMappingURL=main.86f4c5a6.chunk.js.map